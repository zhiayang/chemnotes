% studynotes.cls
% Copyright (c) 2014 - 2016, zhiayang@gmail.com
% Licensed under the Apache License Version 2.0.

\NeedsTeXFormat{LaTeX2e}[1994/06/01]
\ProvidesPackage{studynotes}[2013/01/13 Custom Package]


\RequirePackage[a4paper, top=22.5mm, bottom=25.0mm, left=25.0mm, right=25.0mm, headheight=15pt]{geometry}
\RequirePackage[ampersand]{easylist}
\RequirePackage[usenames,dvipsnames]{xcolor}
\RequirePackage{tabu}
\RequirePackage{tikz}
\RequirePackage{tabto}
\RequirePackage{lipsum}
\RequirePackage{amssymb}
\RequirePackage{lmodern}
\RequirePackage{graphicx}
\RequirePackage{fancyhdr}
\RequirePackage{enumitem}
\RequirePackage{dashrule}
\RequirePackage{graphicx}
\RequirePackage{setspace}
\RequirePackage{longtable}
\RequirePackage{etoolbox}
\RequirePackage{tocloft}
\RequirePackage{regexpatch}
\RequirePackage{afterpage}
\RequirePackage{array}
\RequirePackage{pgfplots}
\RequirePackage[autostyle=false, style=british, strict=true]{csquotes}
\RequirePackage{sansmath}
\RequirePackage{xfrac}
\RequirePackage{unicode-math}
\RequirePackage{newunicodechar}

\RequirePackage[newparttoc]{titlesec}

\RequirePackage[pdfencoding=auto,plainpages=false,pdfpagelabels,psdextra]{hyperref}
\RequirePackage{bookmark}
\RequirePackage{fontspec, xunicode, microtype}


\RequirePackage{chemfig}
\RequirePackage{siunitx}
\RequirePackage{endiagram}
\RequirePackage{chemgreek}
\RequirePackage{chemmacros}
\RequirePackage{chemformula}

\ProcessOptions\relax




\usechemmodule{orbital,redox}

\setchemformula{
	bond-style		= {line width=0.3mm},
	radical-vshift	= -0.35ex
}

\setcrambond{5pt}{1pt}{2pt}

\usetikzlibrary{arrows.meta,calc,positioning}
\usepgfplotslibrary{fillbetween}

\pgfplotsset{
	compat				= 1.13,
	samples				= 100,
	scaled ticks		= false,
	width				= 100mm,
	height				= 60mm,
	clip				= false,
	tick label style	= {font = \sansmath\LatoRegular},
}

\date{}
\author{}


% style settings

\makeatletter
	\def\@seccntformat#1{\protect\makebox[0pt][r]{\csname
	the#1\endcsname\quad}}
\makeatother

\newcommand\blankpage{%
    \null
    \thispagestyle{empty}%
    \addtocounter{page}{-1}%
    \newpage}


% curved chemfig arrow
\makeatletter \definearrow1{s>}{%
	\ifx\@empty#1\@empty
		\expandafter\draw\expandafter[\CF@arrow@current@style,-CF](\CF@arrow@start@node)--(\CF@arrow@end@node);%
	\else
		\def\curvedarrow@style{shorten <=\CF@arrow@offset,shorten >=\CF@arrow@offset,}%
		\CF@expadd@tocs\curvedarrow@style\CF@arrow@current@style
		\expandafter\draw\expandafter[\curvedarrow@style,-CF](\CF@arrow@start@name)..controls#1..(\CF@arrow@end@name);
	\fi
	}
\makeatother


\newcommand\immediateaddcontentsline[3]{%
  \begingroup
  \let\origwrite\write
  \def\write{\immediate\origwrite}%
  \addcontentsline{#1}{#2}{#3}%
  \endgroup
}





% \newfontfamily\HNRegular[
% 	UprightFont		= HelveticaNeue,
% 	ItalicFont		= HelveticaNeue-Italic,
% 	BoldFont		= HelveticaNeue-Medium,
% 	BoldItalicFont	= HelveticaNeue-MediumItalic]{HelveticaNeue}
%
% \newfontfamily\HNLight[
% 	UprightFont		= HelveticaNeue-Thin,
% 	ItalicFont		= HelveticaNeue-LightItalic,
% 	BoldFont		= HelveticaNeue-Light,
% 	BoldItalicFont	= HelveticaNeue-LightItalic]{HelveticaNeue-Light}

\newfontfamily\LatoRegular[
	UprightFont		= Lato-Regular,
	ItalicFont		= Lato-Italic,
	BoldFont		= Lato-Semibold,
	BoldItalicFont	= Lato-SemiboldItalic]{Lato-Regular}

\newfontfamily\LatoLight[
	UprightFont		= Lato-Thin,
	ItalicFont		= Lato-ThinItalic,
	BoldFont		= Lato-Light,
	BoldItalicFont	= Lato-LightItalic]{Lato-Thin}

\newfontfamily\Roboto[
	UprightFont		= Roboto-Light,
	ItalicFont		= Roboto-LightItalic,
	BoldFont		= Roboto,
	BoldItalicFont	= Roboto-Italic]{Roboto-Light}

\newfontfamily\RobotoThin[
	UprightFont		= Roboto-Thin,
	ItalicFont		= Roboto-ThinItalic,
	BoldFont		= Roboto-Light,
	BoldItalicFont	= Roboto-LightItalic]{Roboto-Thin}


\newfontfamily\Alexandria[
	UprightFont		= AlexandriaFLF,
	ItalicFont		= AlexandriaFLF-Italic,
	BoldFont		= AlexandriaFLF-Bold,
	BoldItalicFont	= AlexandriaFLF-BoldItalic]{AlexandriaFLF}

\newfontfamily\SSLight[
	UprightFont		= SourceSansPro-Light,
	ItalicFont		= SourceSansPro-LightItalic,
	BoldFont		= SourceSansPro-Regular,
	BoldItalicFont	= SourceSansPro-Italic]{SourceSansPro-Light}







\defaultfontfeatures{Ligatures=TeX}

\setmainfont[
				Ligatures=TeX,
				BoldFont={Lato-Semibold},
				ItalicFont={Lato-Italic},
				BoldItalicFont={Lato-SemiboldItalic}
			]{Lato-Regular}


\setsansfont[
				Scale=MatchLowercase,
				Ligatures=TeX,
				BoldFont={Lato-Semibold},
				ItalicFont={Lato-Italic},
				BoldItalicFont={Lato-SemiboldItalic}
			]{Lato-Regular}

\setmathfont[
				Ligatures=TeX,
				UprightFont=Asana-Math
]{Asana-Math}

\setmonofont[Scale=MatchLowercase]{Menlo}


\newfontfamily{\fallbackfont}{Arial}[Scale=MatchLowercase]

\DeclareTextFontCommand{\textfallback}{\fallbackfont}
\newunicodechar{δ}{\textfallback{δ}}




\newlength\titleNumberInsetLength
\setlength\titleNumberInsetLength{12.5mm}


\newcolumntype{N}{@{}m{0pt}@{}}


\setstretch{1.05}



\titleformat{\part}[display]
	{\Roboto\fontsize{40pt}{48pt}\selectfont}
	{\Roboto\fontsize{30pt}{36pt}\selectfont\hfill P\fontsize{22pt}{26pt}\selectfont ART\hspace{5mm}\normalfont\Alexandria\fontsize{30pt}{36pt}\selectfont\raisebox{0mm}{\thepart}}
	{-0.5em}
	{\vspace{5mm}}
	[\vspace{-5.0mm}{\makebox[0mm][l]{\rule[10mm]{\textwidth}{0.5mm}}}\vspace{15mm}]


\titleformat{\section}
	{\Roboto\fontsize{25pt}{30pt}\selectfont}
	{\llap{\hspace*{-\titleNumberInsetLength}\normalfont\fontsize{12pt}{14pt}\selectfont\thesection\hfill}}
	{0.0em}
	{}
	[{\makebox[0mm][l]{}}]

\titleformat{\subsection}
	{\Roboto\fontsize{21pt}{25pt}\selectfont}
	{\llap{\hspace*{-\titleNumberInsetLength}\normalfont\fontsize{12pt}{14pt}\selectfont\thesubsection\hfill}}
	{0.0em}
	{}
	[{\makebox[0mm][l]{}}]

\titleformat{\subsubsection}
	{\Roboto\fontsize{18pt}{22pt}\selectfont}
	{\llap{\hspace*{-\titleNumberInsetLength}\normalfont\fontsize{12pt}{14pt}\selectfont\thesubsubsection\hfill}}
	{0.0em}
	{}
	[{\makebox[0mm][l]{}}]

\titleformat{\paragraph}
	{\Roboto\fontsize{15pt}{18pt}\selectfont\bfseries}
	{\llap{\hspace*{-\titleNumberInsetLength}\normalfont\fontsize{12pt}{14pt}\selectfont\hfill}}
	{0.0em}
	{}
	[{\makebox[0mm][l]{}}]











\titlespacing*{\part}{0mm}{-12mm}{-20mm}
\titlespacing*{\section}{0mm}{5mm}{-18.5mm}
\titlespacing*{\subsection}{0mm}{5mm}{-17mm}
\titlespacing*{\subsubsection}{0mm}{5mm}{-15.5mm}
\titlespacing*{\paragraph}{0mm}{0mm}{-13mm}

\makeatletter
	\@addtoreset{section}{part}
\makeatother


\renewcommand{\cftpartfont}{\SSLight\fontsize{24pt}{28pt}\selectfont}
\renewcommand{\cftpartaftersnum}{.}
\renewcommand{\cftsecaftersnum}{.}

\renewcommand{\cftpartpresnum}{\normalfont\Alexandria\fontsize{24pt}{28pt}\selectfont}


\setlength{\cftpartnumwidth}{22mm}
\setlength{\cftsecnumwidth}{2.0em}

\renewcommand{\cftpartindent}{-1.0em}
\renewcommand{\cftsecindent}{2.5em}
\renewcommand{\cftsubsecindent}{4.5em}
\renewcommand{\cftsubsubsecindent}{6.85em}


\renewcommand{\cfttoctitlefont}{\hfill\SSLight\fontsize{35pt}{42pt}\selectfont}
\renewcommand{\contentsname}{\hfill Contents\hfill}
\renewcommand{\cftaftertoctitle}{\hfill}

\renewcommand{\cftdot}{·}


\cftpagenumbersoff{part}
% \renewcommand*{\HyperDestNameFilter}[1]{\thepage-#1}

% \renewcommand{\cftsecfont}{\HNLight\fontsize{18pt}{22pt}\selectfont\bfseries}
% \renewcommand{\cftsecpagefont}{\HNLight\fontsize{18pt}{22pt}\selectfont\bfseries}


\renewcommand{\printatom}[1]{\SSLight\normalfont\fontsize{12pt}{14pt}\selectfont{#1}\normalfont}%

\sisetup{
	detect-all = true
}

\chemsetup[orbital]{
	overlay,
	p/scale = 1.5,
	sp/scale = 1.5,
	sp2/scale = 1.5,
	sp3/scale = 1.5,
	s/scale = 1.5
}

\setlength{\parindent}{0pt}
\setlength{\parskip}{\baselineskip}

\setlist{nosep}


% chemfig stuff
\setdoublesep{1.25mm}		% spacing between lines in a double bond
\setatomsep{12mm}			% fixed length of a bond
\setbondoffset{1.0mm}		% margin
\setbondstyle{line width=0.45mm}

\tikzset{every picture/.style={line width=0.4mm}}

% \input{Commands}

\overfullrule=0.5mm

\pagestyle{fancy}
\fancyhf{}
\fancyhead{}
\renewcommand{\headrulewidth}{0pt}
\rfoot{\thepage}


\newcommand*\parttitle{}
\let\origpart\part
\renewcommand*{\part}[2][]{%
\ifx\\#1\\% optional argument not present?
  \origpart{#2}%
  \renewcommand*\parttitle{#2}%
\else
  \origpart[#1]{#2}%
  \renewcommand*\parttitle{#1}%
\fi
}


\DeclareSIUnit\atm{atm}
\DeclareSIUnit\molarConc{\mole\per\cubic\deci\metre}
\DeclareSIUnit\kJmol{\kilo\joule\per\mole}



\newcommand\setpolymerdelim[2]{\def\delimleft{#1}\def\delimright{#2}}
\def\makebraces[#1,#2]#3#4#5{%
	\edef\delimhalfdim{\the\dimexpr(#1+#2)/2}%
	\edef\delimvshift{\the\dimexpr(#1-#2)/2}%
	\chemmove{%
		\node[at=(#4),yshift=(\delimvshift)]
			{$\left\delimleft\vrule height\delimhalfdim depth\delimhalfdim
			width0pt\right.$};%
		\node[at=(#5),yshift=(\delimvshift)]
			{$\left.\vrule height\delimhalfdim depth\delimhalfdim
			width0pt\right\delimright_{\rlap{$\displaystyle#3$}}$};}}

\setpolymerdelim()



% helper macros


\newcommand	{\normtext}		{\LatoRegular\fontsize{11pt}{13pt}\selectfont}

\newcommand	{\hugetext}		[1]{\SSLight\fontsize{50pt}{60pt}\selectfont#1\normtext\ignorespaces}
\newcommand	{\subtext}		[1]{\SSLight\fontsize{23pt}{28pt}\selectfont #1 \normtext\ignorespaces}
\newcommand	{\tinytext}		[1]{\LatoRegular\fontsize{10pt}{12pt}\selectfont #1 \normtext\ignorespaces}
\newcommand	{\subsubtext}	[1]{\SSLight\fontsize{14pt}{17pt}\selectfont\vspace{0.5em}\textbf{#1}\normtext\ignorespaces\vspace{-0.5em}}

\newcommand {\sbs}			[1]{\textsubscript{#1}}
\newcommand {\sps}			[1]{\textsuperscript{#1}}

\newcommand {\spbs}			[2]{\rlap{\sps{#1}}\sbs{#2}}

\newcommand {\img}			[2]{\includegraphics[width=#1]{#2}}
\newcommand {\imgdiagram}	[3]{\begin{figure}[!ht]\begin{center}\includegraphics[width=#1]{#2}\linebreak
									\fontsize{10pt}{12pt}\selectfont{#3}\normtext
									\end{center}\end{figure}}

\newcommand	{\boit}			[1]{\textbf{\textit{#1}}}

\newcommand {\includefigure}[3]
							{
								\begin{figure}[!ht]
								\begin{center}
								\hbox{
									\vspace{5mm}
									\includegraphics[width=#1]{#2}
								}
								\end{center}
								\begin{center}
								\fontsize{10pt}{12pt}\selectfont{#3}
								\normtext\end{center}\end{figure}
							}


\newcommand {\vdashrule}	[1]{\raisebox{{#1 / 2}}{\rotatebox{270}{\hdashrule[0mm]{#1}{0.75mm}{2mm}}}}


\newcommand	{\diagram}		[3][1.0]
							{
								\begin{figure}[!ht]
								\begin{center}
								\bigskip
								\scalebox{#1}{
									\hbox{
										\vspace{5mm}
										\hspace{-7.5mm}
										{#2}
										\hspace{-7.5mm}
									}
								}
								\end{center}
								\begin{center}
								\fontsize{10pt}{12pt}\selectfont{#3}
								\normtext\end{center}\end{figure}
								\vspace{-5mm}
							}



\newcommand	{\txtdiagram}	[3]
							{
								\begin{figure}[!ht]
								\begin{center}
								\bigskip
								% \hbox{
									\vspace{2mm}
									\hspace{-7.5mm}
									\fontsize{14pt}{17pt}\selectfont
									{#1}
									\hspace{-7.5mm}
									\\
									\vspace{2mm}
									\hspace{-7.5mm}
									{#2}
									\hspace{-7.5mm}
								% }
								\end{center}
								\begin{center}
								\fontsize{10pt}{12pt}\selectfont{#3}
								\normtext\end{center}\end{figure}
								\vspace{-8mm}
							}



















% chem shortcuts
\newcommand {\molecule}		[1]{\begin{center}\chemfig{#1}\end{center}}


% text stuff
\newcommand {\Cl}			{C\textit{l}}
\newcommand {\Al}			{A\textit{l}}

\newcommand {\deltap}		{δ\sps{+}}
\newcommand {\deltam}		{δ\sps{-}}

\newcommand {\snone}		{S\sbs{N}1}
\newcommand {\sntwo}		{S\sbs{N}2}

\newcommand {\spone}		{sp\sps{1} }
\newcommand {\sptwo}		{sp\sps{2} }
\newcommand {\spthree}		{sp\sps{3} }

% small(er)
\newcommand {\smdeltap}		{\fontsize{10pt}{12pt}\selectfontδ\sps{+}\normtext }
\newcommand {\smdeltam}		{\fontsize{10pt}{12pt}\selectfontδ\sps{-}\normtext }
\newcommand {\smfplus}		{\fontsize{9pt}{11pt}\selectfont$\fplus$\normtext}
\newcommand {\smfminus}		{\fontsize{9pt}{11pt}\selectfont$\fminus$\normtext}


% physical chem stuff
\newcommand	{\Menth}		[1]{∆H\sbs{#1}}
\newcommand	{\enth}			[1]{$\Delta H_{#1}$}

\newcommand	{\MenthStd}		[1]{∆H\sps{\standardstate}\sbs{#1}}
\newcommand	{\enthStd}		[1]{$\Delta H^{\standardstate}_{#1}$}

\newcommand {\Mea}			{E\sbs{a} }
\newcommand {\ea}			{$E_{a}$ }

\newcommand	{\entr}			{$\Delta S$ }
\newcommand {\gibb}			{$\Delta G$ }

\newcommand {\Kc}			{$K_{c}$}
\newcommand {\Kp}			{$K_{p}$}
\newcommand {\Ksp}			{$K_{sp}$}

\newcommand {\Qc}			{$Q_{c}$}
\newcommand {\Qp}			{$Q_{p}$}

\newcommand {\MKc}			{\textit{K\sbs{c}}}
\newcommand {\MKp}			{\textit{K\sbs{p}}}
\newcommand {\MKsp}			{\textit{K\sbs{sp}}}


% renew because chemmacro defines this, but not properly (ugly)
\renewcommand {\pH}			{$pH$}
\renewcommand {\pOH}		{$pOH$}
\renewcommand {\pKa}		{$pK_{a}$}
\renewcommand {\pKb}		{$pK_{b}$}
\renewcommand {\Kw}			{$K_{w}$}
\renewcommand {\Ka}			{$K_{a}$}
\renewcommand {\Kb}			{$K_{b}$}


\newcommand {\pKw}			{$pK_{w}$ }
\newcommand {\MpKw}			{\textit{p}K\sbs{w}}

\newcommand {\MpH}			{\textit{p}H}
\newcommand {\MpOH}			{\textit{p}OH}
\newcommand {\MpKa}			{\textit{p}K\sbs{a}}
\newcommand {\MpKb}			{\textit{p}K\sbs{b}}
\newcommand {\MKw}			{K\sbs{w}}
\newcommand {\MKa}			{K\sbs{a}}
\newcommand {\MKb}			{K\sbs{b}}

\newcommand {\Ecell}		{$E^{\standardstate}_{cell}$}
\newcommand {\MEcell}		{E\spbs{\standardstate}{cell}}

\newcommand {\Eo}			{$E^{\standardstate}$}
\newcommand {\MEo}			{E\sps{\standardstate}}

\newcommand	{\stG}			{ \fontsize{0.80em}{1.0em}\selectfont(g)\normtext}
\newcommand	{\stL}			{ \fontsize{0.80em}{1.0em}\selectfont(\textit{l})\normtext}
\newcommand	{\stS}			{ \fontsize{0.80em}{1.0em}\selectfont(s)\normtext}
\newcommand	{\stAq}			{ \fontsize{0.80em}{1.0em}\selectfont(aq)\normtext}

\newcommand	{\fracHalf}	{ ½ }

\newcommand {\stdst}		{\standardstate}


% submolecules

% misc
\definesubmol	\molStar	{{*}}
\definesubmol	\molR		{{\color{Aquamarine}R}}
\definesubmol	\molRon		{{\color{Aquamarine}R1}}
\definesubmol	\molRtw		{{\color{Aquamarine}R2}}
\definesubmol	\molRth		{{\color{Aquamarine}R3}}
\definesubmol	\molRfr		{{\color{Aquamarine}R4}}

% atoms
\definesubmol	\molN		{{\color{RoyalBlue}N}}
\definesubmol	\molO		{{\color{Red}O}}
\definesubmol	\molS		{{\color{Bittersweet}S}}

\definesubmol	\molAl		{A\textit{l}}

% halogens
\definesubmol	\molX		{{\color{OliveGreen}X}} % placeholder
\definesubmol	\molF		{{\color{Tan!80!Black}F}}
\definesubmol	\molCl		{{\color{OliveGreen}\Cl}}
\definesubmol	\molBr		{{\color{Mahogany}Br}}
\definesubmol	\molI		{{\color{Sepia}I}}

% groups
\definesubmol	\molOH		{{\color{Red}O}|{\color{Red}H}}	% hydroxide, red.
\definesubmol	\molHO		{{\color{Red}H}|{\color{Red}O}}	% hydroxide, red.

\definesubmol	\molMe		{C|H\sbs{3}}
\definesubmol	\molMeR		{H\sbs{3}|C}

\definesubmol	\molCN		{C|{\color{RoyalBlue}N}}
\definesubmol	\molAmine	{N|H\sbs{2}}

\definesubmol	\molEthyl	{C|H\sbs{2}|C|H\sbs{3}}				% ch2ch3
\definesubmol	\molPropyl	{C|H\sbs{2}|C|H\sbs{2}|C|H\sbs{3}}	% ch2ch2ch3
\definesubmol	\molNitro	{N|O\sbs{2}}
\definesubmol	\molNitroR	{O\sbs{2}|N}



% utils
\definesubmol	\invisbond	{-[,0.3,,,draw=none]}
\definesubmol	\molDeltap	{δ\sps{+}}
\definesubmol	\molDeltam	{δ\sps{-}}








\newenvironment{bulletlist}
{
	\begin{easylist}[itemize]
	\ListProperties(Space*=-1.0em, Space=-1.0em)
}
{\end{easylist}}


\newenvironment{romanlist}
{
	\begin{easylist}[enumerate]
	\ListProperties(Space*=-1.0em, Space=-1.0em, Numbers=r)
}
{\end{easylist}}

\newenvironment{numberedlist}
{
	\begin{easylist}[enumerate]
	\ListProperties(Space*=-1.0em, Space=-1.0em, Numbers=a)
}
{\end{easylist}}



\endinput
